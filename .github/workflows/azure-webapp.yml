name: Build and Deploy WebApplication1 to Azure

on:
  push:
    branches:
      - main  # main branch ‡¶è push ‡¶π‡¶≤‡ßá‡¶á pipeline ‡¶ö‡¶≤‡¶¨‡ßá

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      # 1Ô∏è‚É£ Checkout source code
      - name: Checkout code
        uses: actions/checkout@v4

      # 2Ô∏è‚É£ Setup .NET SDK
      - name: Setup .NET SDK
        uses: actions/setup-dotnet@v4
        with:
          dotnet-version: '10.0.x'   # ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ (‡¶Ø‡ßá‡¶Æ‡¶® 7.0.x ‡¶π‡¶≤‡ßá ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßã)

      # 3Ô∏è‚É£ Restore dependencies
      - name: Restore dependencies
        run: dotnet restore WebApplication1.sln

      # 4Ô∏è‚É£ Build project
      - name: Build project
        run: dotnet build WebApplication1.sln --configuration Release --no-restore

      # 5Ô∏è‚É£ Publish to folder
      - name: Publish app
        run: dotnet publish WebApplication1/WebApplication1.csproj -c Release -o ./publish_output

      # 6Ô∏è‚É£ Deploy to Azure App Service
      - name: Deploy to Azure Web App
        uses: azure/webapps-deploy@v3
        with:
          app-name: 'your-azure-app-name'            # üëâ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ Azure App Service ‡¶®‡¶æ‡¶Æ ‡¶¶‡¶æ‡¶ì
          publish-profile: ${{ secrets.AZURE_WEBAPP_PUBLISH_PROFILE }}
          package: ./publish_output
